!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemKeys=t.OptionValues=t.Actions=void 0,function(e){e.Remove="remove",e.Update="update"}(t.Actions||(t.Actions={})),function(e){e.Text="Text",e.YesNo="Yes/No",e.Number="Number",e.Equals="Equals",e.GreatherThan="Greather than",e.LessThan="Less than",e.Yes="Yes",e.No="No"}(t.OptionValues||(t.OptionValues={})),function(e){e.Id="id",e.Parent="parent"}(t.ItemKeys||(t.ItemKeys={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParents=t.delegate=t.on=t.qs=void 0;const o=n(0);t.qs=(e,t)=>(t||document).querySelector(e),t.on=(e,t,n,o)=>{e.addEventListener(t,n,!!o)},t.delegate=(e,n,o,s,i)=>{t.on(e,o,e=>{e.target.matches(n)&&s(e)},!!i)},t.getParents=(e,t)=>{const n=e.closest(".form-builder__wrapper"),s=[];if(t===o.Actions.Remove){n.querySelectorAll(".btn_success").forEach(e=>{s.push(e.dataset.parent)})}else if(t===o.Actions.Update){const e=Array.from(n.children);e.shift(),e.forEach(e=>{const t=e.querySelector(".btn_success");s.push(t.dataset.parent)})}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(3);const o=n(4),s=n(5),i=n(6),r=n(7),a=new i.default("store"),l=new s.default('[data-parent="-1"]'),d=new r.default(l,".formBuilder");new o.default(a,d)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),s=e=>{return e.map(e=>e.id).reduce((e,t)=>Math.max(e,t),0)};t.default=class{constructor(e,t){this.store=e,this.view=t,this.index=s(this.store.getData()),t.bindRemoveItem(this.removeItem.bind(this)),t.bindAddItem(this.addItem.bind(this)),t.bindUpdateItem(this.updateItem.bind(this)),t.displayItems(this.store.getData())}addItem(e){const t={id:++this.index,parent:"-1"!==e?Number(e):-1,question:"",type:""};"-1"!==e&&(t.conditionType="",t.conditionValue=""),this.store.add(t),this.view.addItem(t)}removeItem(e){this.store.remove(e),this.view.removeItem(e[0])}updateItem(e){const t=o.getParents(e,"update");this.store.update(e,t),this.view.updateItem(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);t.default=class{constructor(e){this.element=document.querySelector(e)}basicForm(e){const t=document.createElement("div");return t.classList.add("form-builder__wrapper"),t.innerHTML=`\n      <div class="fields">      \n        <div class="fields__group">\n          <label class="fields__label" for="question-${e.id}">question</label>\n          <input class="fields__control" id="question-${e.id}" name="question" type="text" value="${e.question}" placeholder="Enter your question" autocomplete="off">\n        </div>\n        <div class="fields__group">\n          <label class="fields__label" for="type-${e.id}">type</label>\n          <select class="fields__control" id="type-${e.id}" name="type">\n            <option ${e.type?"":'selected="true"'}  disabled="true">Select your value</option>\n            <option ${e.type===o.OptionValues.Text?'selected="true"':""}>Text</option>\n            <option ${e.type===o.OptionValues.YesNo?'selected="true"':""}>Yes/No</option>\n            <option ${e.type===o.OptionValues.Number?'selected="true"':""}>Number</option>\n          </select>\n        </div>\n        <div class="fields__buttons">\n          <button class="btn btn_success" type="button" data-parent="${e.id}">Add Sub-Input</button>\n          <button class="btn btn_danger" type="button">Delete</button>\n        </div>\n      </div>\n    `,t}extendedForm(e,t=""){const n=this.basicForm(e);if(-1!==e.parent){const o=n.firstElementChild,s=this.conditionFields(e,t);o.insertAdjacentElement("afterbegin",s)}return n}conditionFields(e,t){const n=document.createElement("div");return n.classList.add("fields__condition","fields__group"),n.innerHTML=`\n      <label class="fields__label" for="condition-${e.id}">condition</label>\n      <select class="fields__control" id="condition-${e.id}" name="conditionType">\n        <option ${e.conditionType?"":'selected="true"'} disabled="true">Select your value</option>\n        <option ${e.conditionType===o.OptionValues.Equals?'selected="true"':""}>Equals</option>\n      ${"Number"===t?`\n        <option ${e.conditionType===o.OptionValues.GreatherThan?'selected="true"':""}>Greather than</option>\n        <option ${e.conditionType===o.OptionValues.LessThan?'selected="true"':""}>Less than</option>\n      `:""}\n      </select>\n        <label class="sr-only" for="value-${e.id}">value</label>\n      ${"Yes/No"===t?`\n      <select class="fields__control" id="select-${e.id}" name="conditionValue">\n        <option ${e.conditionValue?"":'selected="true"'} disabled="true">Select your value</option>\n        <option ${e.conditionValue===o.OptionValues.Yes?'selected="true"':""}>Yes</option>\n        <option ${e.conditionValue===o.OptionValues.No?'selected="true"':""}>No</option>\n      </select>\n      `:`\n      <input class="fields__control" id="value-${e.id}" name="conditionValue" type=${t===o.OptionValues.Number?"number":"text"} ${e.conditionValue?`value=${e.conditionValue}`:""} placeholder="Enter your value" autocomplete="off"> \n      `}\n    `,n}formList(e,t,n){e.forEach(e=>{const o=this.extendedForm(e,t);e.items&&this.formList(e.items,e.type,o),n?n.appendChild(o):this.element.insertAdjacentElement("beforebegin",o)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);t.default=class{constructor(e){this.name=e}getData(){return JSON.parse(localStorage.getItem(this.name)||"[]")}setData(e){localStorage.setItem(this.name,JSON.stringify(e))}add(e){const t=this.getData();t.push(e),this.setData(t)}remove(e){const t=this.getData();e.forEach(e=>{const n=t.findIndex(t=>t.id===Number(e));t.splice(n,1)}),this.setData(t)}update(e,t){const n=this.getData(),s=Number(e.id.replace(/\D/g,"")),i=e.name,r=e.value,a=n.find(e=>e.id===s);a&&i!==o.ItemKeys.Id&&i!==o.ItemKeys.Parent&&(a[i]=r),e.matches('[name="type"]')&&t.forEach(e=>{const t=n.find(t=>t.id===Number(e));t&&(t.conditionType="",t.conditionValue="")}),this.setData(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),s=(e,t)=>e.reduce((n,o)=>{const i=Object.assign({},o);if(i.parent!==t)return n;const r=s(e,i.id);return r.length&&(i.items=r),n.concat([i])},[]);t.default=class{constructor(e,t){this.formBuilder=o.qs(t),this.template=e}displayItems(e){this.template.formList(s(e,-1))}updateItem(e,t){if(e.matches('[name="type"]')){const n=e.value;t.forEach(e=>{const t=o.qs(`[data-parent="${e}"]`).closest(".fields"),s=t.querySelector(".fields__condition");t.removeChild(s),t.insertAdjacentElement("afterbegin",this.template.conditionFields({id:Number(e)},n))})}}removeItem(e){const t=o.qs(`[data-parent="${e}"]`).closest(".form-builder__wrapper");t.parentNode.removeChild(t)}addItem(e){const t=document.querySelector(`[data-parent="${e.parent}"]`);if(-1!==e.parent){const n=t.closest(".form-builder__wrapper"),o=n.querySelector(`#type-${e.parent}`).value;n.appendChild(this.template.extendedForm(e,o))}else this.formBuilder.insertBefore(this.template.basicForm(e),t)}bindAddItem(e){o.delegate(this.formBuilder,".btn_success","click",t=>{e(t.target.dataset.parent)})}bindRemoveItem(e){o.delegate(this.formBuilder,".btn_danger","click",t=>{e(o.getParents(t.target,"remove"))})}bindUpdateItem(e){o.delegate(this.formBuilder,".fields__control","change",t=>{e(t.target)})}}}]);